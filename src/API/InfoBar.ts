//----------------------------------------------------------------------------------------------------------------------
//Imports from VUE
//----------------------------------------------------------------------------------------------------------------------
import { ref } from 'vue'
import type { Ref } from 'vue'
//----------------------------------------------------------------------------------------------------------------------
//Helper function to format bytes into kB, MB, GB, etc.
//----------------------------------------------------------------------------------------------------------------------
import { formatBytes } from '@/helpers/formaters'
//----------------------------------------------------------------------------------------------------------------------
//Statistic Interface
//----------------------------------------------------------------------------------------------------------------------
import type { Statistic } from '@/interface'
//----------------------------------------------------------------------------------------------------------------------
//Class MAPTORIUM Info Bar
//----------------------------------------------------------------------------------------------------------------------
class MAPTORIUMINFOBAR {
  public queue: Ref<number> = ref(0)
  public download: Ref<number> = ref(0)
  public size: Ref<string> = ref('0.0kB')
  public lat: Ref<string> = ref('')
  public lng: Ref<string> = ref('')
  public zoom: Ref<number> = ref(0)
}
//----------------------------------------------------------------------------------------------------------------------
//INIT new MAPTORIUM Info Bar
//----------------------------------------------------------------------------------------------------------------------
const InfoBar = new MAPTORIUMINFOBAR()
//----------------------------------------------------------------------------------------------------------------------
//EXPORT new MAPTORIUM GPS class
//----------------------------------------------------------------------------------------------------------------------
export default InfoBar
//----------------------------------------------------------------------------------------------------------------------
//SOCKET.IO for realtime comunication
//----------------------------------------------------------------------------------------------------------------------
import socket from './Socket'
//----------------------------------------------------------------------------------------------------------------------
//SOCKET.IO new server stat
//----------------------------------------------------------------------------------------------------------------------
socket.on('stat', (stat: Statistic) => {
  InfoBar.queue.value = stat.queue
  InfoBar.download.value = stat.download
  InfoBar.size.value = formatBytes(stat.size)
})
